{% extends "pages/UserDashboard/base.html" %}

{% block content %}

    <div class="ticket">
        <div class="ticket-header">General Express Voyage</div>
    
        <div class="ticket-row">
            <div>
                <label class="label" for="id">Id:</label>
                <input type="number" id="id" name="id">
                <div class="error" id="id-error"></div>
            </div>
            <div>
                <label class="label" for="bus_no">Bus N°:</label>
                <input type="text" id="bus_no" name="bus_no">
                <div class="error" id="bus_no-error"></div>
            </div>
        </div>
    
        <div class="ticket-row1">
            <label class="label1" for="name">Name:</label>
            <input type="text" id="name" name="name">
            <div class="error" id="name-error"></div>
        </div>
    
        <div class="ticket-row flex-container">
            <div>
                <label class="label" for="seat_no">Seat N°:</label>
                <input type="number" id="seat_no" name="seat_no">
                <div class="error" id="seat_no-error"></div>
            </div>
            <div>
                <label class="label" for="national_id">National ID N°:</label>
                <input type="text" id="national_id" name="national_id">
                <div class="error" id="national_id-error"></div>
            </div>
        </div>
    
        <div class="ticket-row flex-container">
            <div>
                <label class="label" for="departure_town">Departure town:</label>
                <input type="text" id="departure_town" name="departure_town">
                <div class="error" id="departure_town-error"></div>
            </div>
            <div>
                <label class="label" for="arrival_town">Arrival town:</label>
                <input type="text" id="arrival_town" name="arrival_town">
                <div class="error" id="arrival_town-error"></div>
            </div>
        </div>
    </div>

    <button class="print-btn" onclick="validateForm()">Save as PDF</button>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>

        function validateForm() {
            let isValid = true;

            // Clear previous errors
            document.querySelectorAll('.error').forEach(el => el.innerHTML = '');

            // Get values from input fields
            const id = document.getElementById('id').value;
            const busNo = document.getElementById('bus_no').value;
            const name = document.getElementById('name').value;
            const seatNo = document.getElementById('seat_no').value;
            const nationalId = document.getElementById('national_id').value;
            const departureTown = document.getElementById('departure_town').value;
            const arrivalTown = document.getElementById('arrival_town').value;

            // Validate each field
            if (!id) {
                document.getElementById('id-error').innerHTML = 'ID is required';
                isValid = false;
            }

            if (!busNo) {
                document.getElementById('bus_no-error').innerHTML = 'Bus Number is required';
                isValid = false;
            }

            if (!name) {
                document.getElementById('name-error').innerHTML = 'Name is required';
                isValid = false;
            }

            if (!seatNo) {
                document.getElementById('seat_no-error').innerHTML = 'Seat Number is required';
                isValid = false;
            }

            if (!nationalId) {
                document.getElementById('national_id-error').innerHTML = 'National ID is required';
                isValid = false;
            }

            if (!departureTown) {
                document.getElementById('departure_town-error').innerHTML = 'Departure Town is required';
                isValid = false;
            }

            if (!arrivalTown) {
                document.getElementById('arrival_town-error').innerHTML = 'Arrival Town is required';
                isValid = false;
            }

            // If valid, proceed with printing
            if (isValid) {
                window.print();
            }
        }
        
    </script>
{%endblock%}    

